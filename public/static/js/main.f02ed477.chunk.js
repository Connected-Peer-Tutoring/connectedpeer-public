(this.webpackJsonpConnectedPeer=this.webpackJsonpConnectedPeer||[]).push([[0],{115:function(e,t,a){},159:function(e,t,a){e.exports=a(222)},218:function(e,t){},221:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(20),l=a.n(s),i=a(56),c=a(10),o=a(11),m=a(13),u=a(12),d=(a(115),a(164),a(23)),p=a(7),h=a.n(p),f=a(18),v=a(8),E=a(33),g=a.n(E),b={getLoggedIn:function(){return new Promise((function(e,t){g.a.get("".concat("/api")).then((function(t){return e(t.data)})).catch((function(e){t(e)}))}))},getUser:function(){return new Promise((function(e,t){g.a.get("".concat("/api","/user")).then((function(t){return e(t.data)})).catch((function(e){t(e)}))}))},getUserWithId:function(e){return new Promise((function(t,a){g.a.get("".concat("/api","/user/").concat(e)).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},postUserUpdate:function(e){return new Promise((function(t,a){g.a.post("".concat("/api","/updateUser"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},postTutorPost:function(e){return new Promise((function(t,a){g.a.post("".concat("/api","/tutorPost"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},makeAppointment:function(e){return new Promise((function(t,a){g.a.post("".concat("/api","/makeAppointment"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},cancelAppointment:function(e){return new Promise((function(t,a){g.a.post("".concat("/api","/cancelAppointment"),e).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},getTutorResults:function(e){return new Promise((function(t,a){g.a.post("".concat("/api","/getTutors"),e).then((function(e){t(e.data)})).catch((function(e){a(e)}))}))},getChats:function(){return new Promise((function(e,t){g.a.get("".concat("/api","/chat")).then((function(t){return e(t.data)})).catch((function(e){t(e)}))}))},getMessages:function(e){return new Promise((function(t,a){g.a.get("".concat("/api","/chat/").concat(e)).then((function(e){return t(e.data)})).catch((function(e){a(e)}))}))},postNewPFP:function(e,t){return new Promise((function(a,n){g.a.post("".concat("/api","/profile-img-upload"),e,t).then((function(e){return a(e.data)})).catch((function(e){n(e)}))}))},postNewFile:function(e,t){return new Promise((function(a,n){g.a.post("".concat("/api","/file-upload"),e,t).then((function(e){return a(e.data)})).catch((function(e){n(e)}))}))}},N=a(48),y=a.n(N),C=a(271),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.a.AutoInit();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.user_data.logged_in?r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("div",{className:"user-view"},r.a.createElement("div",{className:"background"},r.a.createElement("img",{src:"/images/cloudBackground.jpg",alt:"user background"})),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("img",{className:"circle",src:this.props.user_data.image,alt:"user pfp"})),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("span",{className:"white-text name"},this.props.user_data.displayName)),r.a.createElement("a",{href:"/user/"+this.props.user_data._id},r.a.createElement("span",{className:"white-text email"},this.props.user_data.email)),r.a.createElement("a",{href:"/user/update"},r.a.createElement("span",{className:"white-text"},r.a.createElement("i",{className:"fas fa-user-circle fa-small"})," Edit User Info")))),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/"},"Dashboard")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/appointments"},"Appointments")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect waves-cyan",href:"/learn"},"Learn as a Student")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect waves-green",href:"/volunteer"},"Volunteer as a Tutor")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"subheader",href:"#!"},"Contacts:")),this.props.user_data.contacts.map((function(t,a){return r.a.createElement("li",{key:a},r.a.createElement("a",{className:"waves-effect waves-green",href:"/user/"+t},r.a.createElement("div",{className:"row center"},r.a.createElement("div",{className:"col s2"},r.a.createElement(C.a,{variant:"square",className:"avatar-helper",src:e.props.user_data.contacts_data[t].image,alt:e.props.user_data.contacts_data[t].firstName+"'s pfp"})),r.a.createElement("div",{className:"col s10"},e.props.user_data.contacts_data[t].displayName))))})),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"subheader",href:"https://connectedpeertutoring.org/"},"\xa9 2020 CPT")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/about"},"About Us")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/report"},"Report")),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org/privacy-policy"},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/auth/logout"},"Logout"))):r.a.createElement("div",null,r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"https://connectedpeertutoring.org"},"About Us")),r.a.createElement("li",null,r.a.createElement("div",{className:"divider"})),r.a.createElement("li",null,r.a.createElement("a",{className:"waves-effect",href:"/auth/google"},"Login/Signup")))}}]),a}(n.Component),S=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"primary-color-background"},r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("a",{href:"/",className:"brand-logo center"},"ConnectedPeer"),r.a.createElement("a",{href:"/","data-target":"slide-out",className:"sidenav-trigger show-on-large"},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement("ul",{className:"sidenav",id:"slide-out"},r.a.createElement(w,{user_data:this.props.user_data}))))}}]),a}(n.Component),_=a(16),j=a.n(_),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,tutor:null},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.appointment[1];case 2:return e.t0=e.sent,e.next=5,this.props.user_data._id;case 5:if(e.t1=e.sent,e.t0!==e.t1){e.next=10;break}this.setState({userId:this.props.appointment[2],tutor:!1}),e.next=11;break;case 10:this.setState({userId:this.props.appointment[1],tutor:!0});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.userId&&this.props.user_data.contacts_data?this.props.appointment[5]?r.a.createElement("div",{className:this.state.tutor?"card-panel teal":"card-panel cyan"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6"},r.a.createElement("a",{href:"/user/"+this.state.userId},r.a.createElement("h5",{className:"white-text"},r.a.createElement("strong",null,"Appointment with"," ",this.props.user_data.contacts_data[this.state.userId].displayName))),r.a.createElement("h6",{className:"white-text"},j()(this.props.appointment[0]).local().format("h:mm A, dddd MMMM Do, YYYY"))),r.a.createElement("div",{className:"col s12 xl6"},r.a.createElement("a",{className:"waves-effect white-text",href:"/user/"+this.state.userId},r.a.createElement("h5",{className:"white-text"},"Tutor:"," ",this.state.tutor?this.props.user_data.displayName:this.props.user_data.contacts_data[this.state.userId].displayName))),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"divider"}),r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},href:"/chat/"+this.props.user_data.contacts_data[this.state.userId].chatRoom},"Chat",r.a.createElement("i",{className:"material-icons right"},"chat"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},target:"_blank",rel:"noopener noreferrer",href:this.props.appointment[4]},"Join Google Meet",r.a.createElement("i",{className:"material-icons right"},"videocam"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn white teal-text":"waves-effect btn white cyan-text",style:{margin:"0.5em"},target:"_blank",rel:"noopener noreferrer",href:"https://jamboard.google.com/d/"+this.props.appointment[5]},"Open Jamboard",r.a.createElement("i",{className:"material-icons right"},"create"))," ",r.a.createElement("a",{className:this.state.tutor?"waves-effect btn teal white-text modal-trigger":"waves-effect btn cyan white-text modal-trigger",style:{margin:"0.5em"},href:"#cancelAppointmentModal",onClick:function(){return e.props.updateChosenAppointment(e.props.appointment,e.props.user_data.contacts_data[e.state.userId])}},"Cancel ",r.a.createElement("i",{className:"material-icons right"},"delete_forever"))))):null:r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),k=a(268),A=a(267),x=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={openSuccess:!1,openErr:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){y.a.AutoInit()}},{key:"onSubmit",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b.cancelAppointment(this.props.appointment).then((function(e){e.success?a.setState({openSuccess:!0}):a.setState({openErr:!0})}));case 3:window.location.reload();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"cancelAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"red-text"},"Cancel Appointment with ",this.props.user_data.firstName),r.a.createElement("h4",null,j()(this.props.appointment[0]).local().format("h:mm A, dddd MMMM Do, YYYY")),r.a.createElement("h5",{className:"red-text"},"You may be penalized for cancelling an appointment")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn red modal-close",onClick:this.onSubmit},"Cancel Appointment",r.a.createElement("i",{className:"material-icons right"},"delete_forever")))),r.a.createElement(k.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErr:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be cancelled")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.user_data.firstName," cancelled")))}}]),a}(n.Component),P=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).updateChosenAppointment=n.updateChosenAppointment.bind(Object(v.a)(n)),n.state={appointment:[],user_data:{},tutor:null},n}return Object(o.a)(a,[{key:"updateChosenAppointment",value:function(e,t){this.setState({appointment:e,user_data:t})}},{key:"render",value:function(){var e=this;return this.props.user_data._id?this.props.user_data.appointments.length>0?r.a.createElement("div",null,r.a.createElement("h5",null,"Future Appointments:"),this.props.user_data.appointments.map((function(t,a){return r.a.createElement(O,{key:a,user_data:e.props.user_data,appointment:t,updateChosenAppointment:e.updateChosenAppointment})})),r.a.createElement(x,{user_data:this.state.user_data,appointment:this.state.appointment,updateState:this.props.updateState})):r.a.createElement("h5",null,"You have no future appointments"):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),M=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){if(!this.props.user_data._id)return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))));0===this.props.user_data.grade&&(window.location.href="/tutorial");var e=Math.ceil(.25*Math.pow(10,Math.ceil(Math.log10(this.props.user_data.hours+1)))*Math.ceil((this.props.user_data.hours+1)/(.25*Math.pow(10,Math.ceil(Math.log10(this.props.user_data.hours+1))))));return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement("h4",{className:"primary-color"},"Welcome ",this.props.user_data.displayName),r.a.createElement("div",null,"You have volunteered for: ",this.props.user_data.hours," hours"),r.a.createElement("div",null,"Current Goal: ",e," hours"),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"determinate teal",style:{width:this.props.user_data.hours/e*100+"%"}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl4 offset-xl2"},r.a.createElement(P,{user_data:this.props.user_data,updateState:this.props.updateState})),r.a.createElement("div",{className:"col s12 xl4"},r.a.createElement("h5",null,"Get started:"),r.a.createElement("div",{className:"card-panel flex-container"},r.a.createElement("h5",{className:"cyan-text space-between"},"Learn as a peer student",r.a.createElement("a",{className:"waves-effect waves-light btn-large cyan",href:"/learn"},r.a.createElement("i",{className:"material-icons"},"trending_up")))),r.a.createElement("div",{className:"card-panel flex-container"},r.a.createElement("h5",{className:"teal-text space-between"},"Volunteer as a peer tutor",r.a.createElement("a",{className:"waves-effect waves-light btn-large teal",href:"/volunteer"},r.a.createElement("i",{className:"material-icons"},"trending_up")))))))}}]),a}(n.Component),D=a(85),T=a(260),I=a(25),Y=a(261),F=a(269),H=a(266),B=a(265),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeAvailableStart=n.onChangeAvailableStart.bind(Object(v.a)(n)),n.onChangeAvailableEnd=n.onChangeAvailableEnd.bind(Object(v.a)(n)),n.onChangeSubjects=n.onChangeSubjects.bind(Object(v.a)(n)),n.onChangeBio=n.onChangeBio.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={availableStart:j()().startOf("hour").add(24,"h"),availableEnd:j()().startOf("hour").add(25,"h"),subjects:[],bio:"",openSuccess:!1,openErrTime:!1,openErrTime1:!1,openErrSubject:!1,openErrBio:!1},n}return Object(o.a)(a,[{key:"onChangeAvailableStart",value:function(e){this.setState({availableStart:e,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeAvailableEnd",value:function(e){this.setState({availableEnd:e,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeSubjects",value:function(e,t){this.setState({subjects:t,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onChangeBio",value:function(e){this.setState({bio:e.target.value,openSuccess:!1,openErrTime:!1,openErrSubject:!1,openErrBio:!1})}},{key:"onSubmit",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.availableStart.clone(),n=this.state.availableEnd.clone(),n=a.clone().startOf("day").hour(n.hour()).minute(n.minute()).utc().valueOf(),a=a.utc().valueOf(),n<a&&n-a<=432e5&&(n+=864e5),a+36e5>n)this.setState({openErrTime:!0});else if(n-a>288e5)this.setState({openErrTime1:!0});else if(0===this.state.subjects.length&&0===this.props.user_data.subjects.length)this.setState({openErrSubject:!0});else if(0===this.state.bio.length&&0===this.props.user_data.bio.length)this.setState({openErrBio:!0});else{for(r=this.props.user_data.tutorAvailability,s=Math.ceil(a/18e5);s<Math.floor(n/18e5);s++)r.indexOf(18e5*s)<0&&r.push(18e5*s);l={subjects:0===this.state.subjects.length?this.props.user_data.subjects:this.state.subjects,bio:this.state.bio?this.state.bio:this.props.user_data.bio,tutorAvailability:r},b.postTutorPost(l),this.setState({openSuccess:!0})}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.user_data._id?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"Post_Tutor_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(I.a,{utils:D.a},r.a.createElement(Y.a,{variant:"inline",margin:"normal",id:"date_available",label:"Date available",format:"M/D/YYYY",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(F.a,{variant:"inline",margin:"normal",id:"time_available_start",label:"Available time range start",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(F.a,{variant:"inline",margin:"normal",id:"time_available_end",label:"Available time range end",value:this.state.availableEnd,onChange:this.onChangeAvailableEnd,KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{multiple:!0,id:"subjects",size:"small",options:U,getOptionLabel:function(e){return e},filterSelectedOptions:!0,defaultValue:this.props.user_data.subjects,onChange:this.onChangeSubjects,renderInput:function(e){return r.a.createElement(B.a,Object.assign({},e,{label:"Subjects",helperText:"List the subjects you can be a tutor in"}))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(B.a,{margin:"normal",id:"standard-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Ex: I'm a junior in University High School. I have been a peer tutor for 3 months. I have recieved a 5 on AP Biology and AP Calculus AB and can tutor in those subjects.",label:"Bio:",defaultValue:this.props.user_data.bio,helperText:"Provide information about you for the peer students",onChange:this.onChangeBio}))),r.a.createElement("input",{type:"submit",value:"Post",className:"waves-effect waves-light btn teal"})))),r.a.createElement(k.a,{open:this.state.openErrTime,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrTime:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your availabilty must be atleast an hour")),r.a.createElement(k.a,{open:this.state.openErrTime1,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrTime1:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"You can only post up to 8 hours")),r.a.createElement(k.a,{open:this.state.openErrSubject,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrSubject:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input the subject(s) you can tutor")),r.a.createElement(k.a,{open:this.state.openErrBio,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrBio:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input more information on your bio")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Your tutor availabilty has been succesfully posted"))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),U=["Math","Algebra","Algebra 2","Geometry","Precalculus","AP Statistics","Calculus","AP Calculus AB","AP Calculus BC","AP Economics Micro","AP Economics Macro","Biology","AP Biology","AP Enviromental Science","Chemistry","AP Chemistry","Physics","AP Physics 1","AP Physics 2","AP Physics C","English","AP English Lang","AP English Lit","AP Psychology","History","AP Human Geography","AP US History","AP European History","AP World History","Spanish","AP Spanish","Chinese","AP Chinese","French","AP French","AP Computer Science P","AP Computer Science A"],R=L,W=a(90),G=a(143),V=a.n(G);a(187);function q(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),s=r.length,l=new Uint8Array(s);s--;)l[s]=r.charCodeAt(s);return new File([l],t,{type:n})}function z(e){return e.substring("data:image/".length,e.indexOf(";base64"))}var K="image/x-png, image/png, image/jpg, image/jpeg, image/gif",J=K.split(",").map((function(e){return e.trim()})),X=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).imagePreviewCanvasRef=r.a.createRef(),n.fileInputRef=r.a.createRef(),n.verifyFile=n.verifyFile.bind(Object(v.a)(n)),n.handleOnDrop=n.handleOnDrop.bind(Object(v.a)(n)),n.handleOnCropChange=n.handleOnCropChange.bind(Object(v.a)(n)),n.handleOnCropComplete=n.handleOnCropComplete.bind(Object(v.a)(n)),n.handleClearToDefault=n.handleClearToDefault.bind(Object(v.a)(n)),n.handleUpload=n.handleUpload.bind(Object(v.a)(n)),n.handleFileSelect=n.handleFileSelect.bind(Object(v.a)(n)),n.state={imgSrc:null,imgSrcExt:null,cropped:!1,waiting:!1,crop:{aspect:1},openErrFile:!1,openErr:!1,openSuccess:!1},n}return Object(o.a)(a,[{key:"verifyFile",value:function(e){if(e&&e.length>0){var t=e[0],a=t.type;return t.size>5e6?(this.setState({openErrFile:!0}),!1):!!J.includes(a)||(this.setState({openErrFile:!0}),!1)}}},{key:"handleOnDrop",value:function(e,t){var a=this;if((t&&t.length>0&&this.verifyFile(t),e&&e.length>0)&&this.verifyFile(e)){var n=e[0],r=new FileReader;r.addEventListener("load",(function(){var e=r.result;a.setState({imgSrc:e,imgSrcExt:z(e)})}),!1),r.readAsDataURL(n)}}},{key:"handleOnCropChange",value:function(e){this.setState({crop:e})}},{key:"handleOnCropComplete",value:function(e,t){!function(e,t,a){var n=e;n.width=a.width,n.height=a.height;var r=n.getContext("2d"),s=new Image;s.src=t,s.onload=function(){r.drawImage(s,a.x,a.y,a.width,a.height,0,0,a.width,a.height)}}(this.imagePreviewCanvasRef.current,this.state.imgSrc,t),this.setState({cropped:!0})}},{key:"handleClearToDefault",value:function(e){e&&e.preventDefault();var t=this.imagePreviewCanvasRef.current;t.getContext("2d").clearRect(0,0,t.width,t.height),this.setState({imgSrc:null,imgSrcExt:null,cropped:!1,waiting:!1,crop:{aspect:1},openErr:!1,openSuccess:!1}),this.fileInputRef.current=null}},{key:"handleUpload",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s,l,i,c,o=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({waiting:!0}),this.state.imgSrc&&(a=this.imagePreviewCanvasRef.current,n=this.state.imgSrcExt,r=a.toDataURL("image/"+n),s=this.props.user_data._id+"_Profile_Picture."+n,l=q(r,s),i=new FormData,c={header:{"content-type":"multipart/form-data"}},i.append("file",l),b.postNewPFP(i,c).then((function(e){e.sucess?(o.setState({openSuccess:!0}),o.handleClearToDefault(t),window.location.reload()):(o.setState({openErr:!0}),o.handleClearToDefault(t))})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleFileSelect",value:function(e){var t=this,a=e.target.files;if(a&&a.length>0&&this.verifyFile(a)){var n=a[0],r=new FileReader;r.addEventListener("load",(function(){var e=r.result;t.setState({imgSrc:e,imgSrcExt:z(e)})}),!1),r.readAsDataURL(n)}}},{key:"componentDidMount",value:function(){y.a.AutoInit()}},{key:"render",value:function(){var e=this,t=this.state.imgSrc;return r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"changePFPModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"primary-color"},"Change Profile Picture"),null!==t?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel center"},r.a.createElement(V.a,{src:t,crop:this.state.crop,onComplete:this.handleOnCropComplete,onChange:this.handleOnCropChange}),r.a.createElement("canvas",{ref:this.imagePreviewCanvasRef,style:{height:"0"}}),this.state.waiting?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):r.a.createElement("div",null,this.state.cropped?r.a.createElement("div",null,r.a.createElement("button",{className:"waves-effect waves-light btn",style:{margin:"0.5em"},onClick:this.handleUpload},"Change"," ",r.a.createElement("i",{className:"material-icons right"},"send"))):r.a.createElement("h6",{className:"primary-color"},"Crop your picture"),r.a.createElement("button",{className:"waves-effect waves-light btn",style:{margin:"0.5em"},onClick:this.handleClearToDefault},"Clear"))))):r.a.createElement(W.a,{onDrop:this.handleOnDrop,accept:K,multiple:!1,maxSize:5e6},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("div",Object.assign({className:"card-panel center",style:{margin:"0.5em",height:"35vh"}},t()),r.a.createElement("input",a()),r.a.createElement("h5",{className:"primary-color"},"Drop or upload new PFP ","&"," crop"))})))),r.a.createElement(k.a,{open:this.state.openErrFile,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrFile:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Only images under 5 mb are accepted")),r.a.createElement(k.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErr:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Profile picture could not be changed")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Profile picture was successfully changed")))}}]),a}(n.Component),Q=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onChangeDisplayName=n.onChangeDisplayName.bind(Object(v.a)(n)),n.onChangeFirstName=n.onChangeFirstName.bind(Object(v.a)(n)),n.onChangeLastName=n.onChangeLastName.bind(Object(v.a)(n)),n.onChangeGrade=n.onChangeGrade.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n.onChangeBio=n.onChangeBio.bind(Object(v.a)(n)),n.onChangeSubject=n.onChangeSubject.bind(Object(v.a)(n)),n.onChangeTutorAvailability=n.onChangeTutorAvailability.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={_id:null,email:null,subjects:[],tutorAvailability:[],displayName:null,grade:0,firstName:null,lastName:null,bio:null,openSuccess:!1,openErr:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.getUser().then((function(e){t.setState({_id:e._id,email:e.email,subjects:e.subjects,tutorAvailability:e.tutorAvailability,displayName:e.displayName,grade:e.grade,firstName:e.firstName,lastName:e.lastName,bio:e.bio})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeDisplayName",value:function(e){this.setState({displayName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeFirstName",value:function(e){this.setState({firstName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeLastName",value:function(e){this.setState({lastName:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeGrade",value:function(e,t){this.setState({grade:t.i,openSuccess:!1,openErr:!1})}},{key:"onChangeBio",value:function(e){this.setState({bio:e.target.value,openSuccess:!1,openErr:!1})}},{key:"onChangeSubject",value:function(e){this.setState({subjects:this.state.subjects.filter((function(t){return e.target.toString().replace(/%20/g," ").indexOf(t)<0}))})}},{key:"onChangeTutorAvailability",value:function(e){this.setState({tutorAvailability:this.state.tutorAvailability.filter((function(t){return e.target.toString().indexOf(t.toString())<0}))})}},{key:"onSubmit",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a={displayName:this.state.displayName,grade:this.state.grade,firstName:this.state.firstName,lastName:this.state.lastName,bio:this.state.bio,subjects:this.state.subjects,tutorAvailability:this.state.tutorAvailability},0!==this.state.grade||0!==this.props.user_data.grade){e.next=6;break}this.setState({openErr:!0}),e.next=15;break;case 6:if(0!==this.props.user_data.grade){e.next=13;break}return e.next=9,b.postUserUpdate(a);case 9:this.setState({openSuccess:!0}),window.location.href="/",e.next=15;break;case 13:b.postUserUpdate(a),this.setState({openSuccess:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(e,t){"clickaway"!==t&&this.setState({openSuccess:!1,openErr:!1})}},{key:"render",value:function(){var e=this;return this.state._id?r.a.createElement("div",null,r.a.createElement(X,{user_data:this.props.user_data,updateState:this.props.updateState}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{className:"modal-trigger",href:"#changePFPModal"},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.displayName+"'s pfp",src:this.props.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.displayName),this.state.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),Z[Z.findIndex((function(t){return t.i===e.state.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.props.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",{key:a},"Subjects ",e.state.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t,onClick:e.onChangeSubject},t+" \xd7")):r.a.createElement("span",{className:"secondary-color",key:a},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t,onClick:e.onChangeSubject},t+" \xd7"))})),r.a.createElement("div",null,this.state.bio?"About "+this.state.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.bio)))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.map((function(t,a,n){if(0===n.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",{key:a},r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A ")+"\xd7")));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",{key:a},r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A ")+"\xd7"))):r.a.createElement("span",{key:a},r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small",href:"#"+t,onClick:e.onChangeTutorAvailability},s.format("h:mm A ")+"\xd7"))})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"User_Update_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(B.a,{id:"name",fullWidth:!0,onChange:this.onChangeDisplayName,label:"Display Name",defaultValue:this.state.displayName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(B.a,{id:"first_name",fullWidth:!0,onChange:this.onChangeFirstName,label:"First name",defaultValue:this.state.firstName})),r.a.createElement("div",{className:"input-field col s6"},r.a.createElement(B.a,{id:"last_name",fullWidth:!0,onChange:this.onChangeLastName,label:"Last name",defaultValue:this.state.lastName}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(B.a,{disabled:!0,id:"email",fullWidth:!0,type:"email",defaultValue:this.state.email,label:"Email",className:"validate"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{id:"grade-level",options:Z,getOptionLabel:function(e){return e.grade},defaultValue:this.state.grade>0?Z[Z.findIndex((function(t){return t.i===e.state.grade}))]:null,onChange:this.onChangeGrade,renderInput:function(e){return r.a.createElement(B.a,Object.assign({},e,{label:"Grade"}))}}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(B.a,{margin:"normal",id:"standard-multiline-static",multiline:!0,fullWidth:!0,placeholder:"Your Bio: (ex: I'm a junior in University High School.)",label:"Bio:",defaultValue:this.state.bio,helperText:"Provide information about you for your peers",onChange:this.onChangeBio}))),r.a.createElement("input",{type:"submit",value:"Update",className:"waves-effect waves-light btn tertiary-color-background"})))),r.a.createElement(k.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErr:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please input your grade")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Your user info has been successfully changed")))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),Z=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],$=Q,ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={openSuccess:!1,openErr:!1,openErrWait:!1,waiting:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){y.a.AutoInit()}},{key:"onSubmit",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.waiting){e.next=3;break}return e.abrupt("return",this.setState({openErrWait:!0}));case 3:return a={appointment:[this.props.appointment_time,this.props.user_data._id,this.props.tutor_data._id,null,null,null,!1]},this.setState({waiting:!0}),e.next=7,b.makeAppointment(a).then((function(e){e.success?n.setState({openSuccess:!0,openErrWait:!1,waiting:!1}):n.setState({openErr:!0,openErrWait:!1,waiting:!1})}));case 7:this.props.updateState();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.appointment_time?r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"makeAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"primary-color"},"Make Appointment with ",this.props.tutor_data.firstName),r.a.createElement("h4",null,j()(this.props.appointment_time).local().format("h:mm A, dddd MMMM Do, YYYY"))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn modal-close",onClick:this.onSubmit},"Make Appointment!",r.a.createElement("i",{className:"material-icons right"},"send")))),r.a.createElement(k.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErr:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be made")),r.a.createElement(k.a,{open:this.state.openErrWait,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrWait:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Please wait before requesting another appointment")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.tutor_data.firstName," made!"))):r.a.createElement("span",{onClick:function(t){return e.setState({openErr:!1,openSuccess:!1})}},r.a.createElement("div",{id:"makeAppointmentModal",className:"modal"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("h3",{className:"primary-color"},"Make Appointment with ",this.props.tutor_data.firstName),r.a.createElement("h4",null,"No time slot selected")),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("a",{href:"#!",className:"waves-effect waves-light btn modal-close"},"Take me back",r.a.createElement("i",{className:"material-icons right"},"arrow_back")))),r.a.createElement(k.a,{open:this.state.openErr,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErr:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Appointment could not be made")),r.a.createElement(k.a,{open:this.state.openSuccess,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openSuccess:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"success"},"Appointment with ",this.props.tutor_data.firstName," made!")))}}]),a}(n.Component),te=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,subjects:[],tutorAvailability:[],chosenDate:null,user_data:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.match.params.userId,b.getUserWithId(t).then((function(e){a.setState({userId:t,user_data:e,subjects:e.subjects,tutorAvailability:e.tutorAvailability})}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return"update"===this.state.userId?r.a.createElement($,{user_data:this.props.user_data,updateState:this.props.updateState}):(this.state.user_data.user_dne&&(window.location.href="/user/update"),this.state.user_data._id&&this.props.user_data._id?this.state.userId===this.props.user_data._id?r.a.createElement($,{user_data:this.props.user_data,updateState:this.props.updateState}):r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{href:"/user/"+this.state.user_data._id},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.user_data.displayName+"'s pfp",src:this.state.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.user_data.displayName),this.state.user_data.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),ae[ae.findIndex((function(t){return t.i===e.state.user_data.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.state.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",{key:a},"Subjects ",e.state.user_data.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t)):r.a.createElement("span",{className:"secondary-color",key:a},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t))})),r.a.createElement("div",null,this.state.user_data.bio?"About "+this.state.user_data.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.user_data.bio)),r.a.createElement("div",null,this.props.user_data.contacts_data[this.state.userId]?r.a.createElement("a",{className:"waves-effect btn white blue-text",style:{margin:"0.5em"},href:"/chat/"+this.props.user_data.contacts_data[this.state.userId].chatRoom},"Chat",r.a.createElement("i",{className:"material-icons right"},"chat")):null))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.filter((function(t){return!(e.props.user_data.appointments.flat().indexOf(t)>=0||e.props.user_data.appointments.flat().indexOf(t-18e5)>=0||e.props.user_data.appointments.flat().indexOf(t+18e5)>=0)})).map((function(t,a,n){if(0===n.length||0===e.state.subjects.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",{key:a},r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A"))));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",{key:a},r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))):r.a.createElement("span",{key:a},r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.setState({chosenDate:t})}},s.format("h:mm A")))})),r.a.createElement(ee,{tutor_data:this.state.user_data,user_data:this.props.user_data,appointment_time:this.state.chosenDate,updateState:this.props.updateState})))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))))}}]),a}(n.Component),ae=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],ne=Object(d.g)(te),re=a(60),se=a(42);var le=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={userId:null,subjects:[],tutorAvailability:[],chosenDate:null,user_data:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.getUserWithId(this.props.tutor).then((function(e){t.setState({userId:t.props.tutor,user_data:e,subjects:e.subjects,tutorAvailability:e.tutorAvailability})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.user_data._id&&this.props.user_data._id?(this.state.user_data.user_dne&&(window.location.href="/user"),r.a.createElement("div",null,r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s3 xl1"},r.a.createElement("a",{href:"/user/"+this.state.user_data._id},r.a.createElement("img",{className:"circle responsive-img",alt:this.state.user_data.displayName+"'s pfp",src:this.state.user_data.image}))),r.a.createElement("div",{className:"col s11"},r.a.createElement("h6",{className:"primary-color"},this.state.user_data.displayName),this.state.user_data.grade>0?r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Grade: "),ie[ie.findIndex((function(t){return t.i===e.state.user_data.grade}))].grade):null,r.a.createElement("div",{className:"primary-color"},r.a.createElement("span",{className:"black-text"},"Hours Volunteered: "),this.state.user_data.hours),this.state.subjects.map((function(t,a,n){return 0===n.length?null:0===a?r.a.createElement("span",null,"Subjects ",e.state.user_data.firstName," can tutor:"," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t)):r.a.createElement("span",{className:"secondary-color"},","," ",r.a.createElement("a",{className:"waves-effect waves-light",href:"#"+t},t))})),r.a.createElement("div",null,this.state.user_data.bio?"About "+this.state.user_data.firstName+":":null,r.a.createElement("div",{className:"secondary-color"},this.state.user_data.bio)))),r.a.createElement("div",{className:"row"},this.state.tutorAvailability.filter((function(t){return!(t<e.props.time[0]||t>e.props.time[e.props.time.length-1])&&!(e.props.user_data.appointments.flat().indexOf(t)>=0||e.props.user_data.appointments.flat().indexOf(t-18e5)>=0||e.props.user_data.appointments.flat().indexOf(t+18e5)>=0)})).map((function(t,a,n){if(0===n.length||0===e.state.subjects.length)return null;var s=j()(t).local();if(0===a)return r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",null,"Tutor Availability:"),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.props.setState({tutor_data:e.state.user_data,chosenDate:t})}},s.format("h:mm A"))));var l=j()(n[a-1]).local();return s.format("d")!==l.format("d")?r.a.createElement("span",null,r.a.createElement("div",{className:"divider"}),r.a.createElement("h6",{className:"primary-color"},s.format("dddd MMMM Do, YYYY")),r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.props.setState({tutor_data:e.state.user_data,chosenDate:t})}},s.format("h:mm A")))):r.a.createElement("span",null,r.a.createElement("a",{className:"waves-effect waves-cyan btn-flat btn-small modal-trigger",href:"#makeAppointmentModal",onClick:function(){return e.props.setState({tutor_data:e.state.user_data,chosenDate:t})}},s.format("h:mm A")))})),r.a.createElement(ee,{tutor_data:this.props.tutor_data,user_data:this.props.user_data,appointment_time:this.props.chosenDate,updateState:this.props.updateState}))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),ie=[{grade:"7",i:7},{grade:"8",i:8},{grade:"9",i:9},{grade:"10",i:10},{grade:"11",i:11},{grade:"12",i:12},{grade:"College and above",i:13}],ce=le;function oe(e){var t=Object(n.useState)(0),a=Object(re.a)(t,2),s=a[0],l=a[1],i=function(e,t){var a=Object(n.useState)(!0),r=Object(re.a)(a,2),s=r[0],l=r[1],i=Object(n.useState)(!1),c=Object(re.a)(i,2),o=c[0],m=c[1],u=Object(n.useState)([]),d=Object(re.a)(u,2),p=d[0],h=d[1],f=Object(n.useState)(!1),v=Object(re.a)(f,2),E=v[0],g=v[1];return Object(n.useEffect)((function(){h([])}),[e]),Object(n.useEffect)((function(){l(!0),m(!1),b.getTutorResults({q:e,page:t}).then((function(e){h((function(t){return Object(se.a)(new Set([].concat(Object(se.a)(t),Object(se.a)(e.tutorIDs))))})),g(e.hasMore),l(!1)}))}),[e,t]),{loading:s,error:o,tutors:p,hasMore:E}}(e.query,s),c=i.tutors,o=i.hasMore,m=i.loading,u=Object(n.useRef)(),d=Object(n.useCallback)((function(e){m||(u.current&&u.current.disconnect(),u.current=new IntersectionObserver((function(e){e[0].isIntersecting&&o&&l((function(e){return e+1}))})),e&&u.current.observe(e))}),[m,o]);return r.a.createElement(r.a.Fragment,null,c.filter((function(t){return t!==e.user_data._id})).map((function(t,a){return c.length===a+1?r.a.createElement("div",{ref:d},r.a.createElement(ce,{tutor:t,time:e.query.time,user_data:e.user_data,updateState:e.updateState,tutor_data:e.tutor_data,chosenDate:e.chosenDate,setState:e.setState})):r.a.createElement(ce,{key:t,tutor:t,time:e.query.time,user_data:e.user_data,updateState:e.updateState,tutor_data:e.tutor_data,chosenDate:e.chosenDate,setState:e.setState})})),r.a.createElement("div",null,m?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):null))}var me=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSelect=n.handleSelect.bind(Object(v.a)(n)),n.onChangeAvailableStart=n.onChangeAvailableStart.bind(Object(v.a)(n)),n.onChangeAvailableEnd=n.onChangeAvailableEnd.bind(Object(v.a)(n)),n.onChangeSubjects=n.onChangeSubjects.bind(Object(v.a)(n)),n.onSubmit=n.onSubmit.bind(Object(v.a)(n)),n.state={availableStart:j()().startOf("hour").add(48,"h"),availableEnd:j()().startOf("hour").add(49,"h"),subjects:[],query:{time:[null],subjects:[null]},openErrTime:!1,openErrTime1:!1,openErrTime2:!1,openErrSubjects:!1,tutors:[],tutor_data:{},chosenDate:null},n}return Object(o.a)(a,[{key:"handleSelect",value:function(e){this.setState({tutor_data:e.tutor_data,chosenDate:e.chosenDate})}},{key:"onChangeAvailableStart",value:function(e){this.setState({availableStart:e,openErrTime:!1,openErrTime1:!1,openErrTime2:!1,openErrSubjects:!1})}},{key:"onChangeAvailableEnd",value:function(e){this.setState({availableEnd:e,openErrTime:!1,openErrTime1:!1,openErrTime2:!1,openErrSubjects:!1})}},{key:"onChangeSubjects",value:function(e,t){t.length>5?this.setState({subjects:t,openErrTime:!1,openErrTime1:!1,openErrTime2:!1,openErrSubjects:!0}):this.setState({subjects:t,openErrTime:!1,openErrTime1:!1,openErrTime2:!1,openErrSubjects:!1})}},{key:"onSubmit",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.availableStart.clone(),n=this.state.availableEnd.clone(),n=a.clone().startOf("day").hour(n.hour()).minute(n.minute()).utc().valueOf(),a=a.utc().valueOf(),n<a&&n-a<=432e5&&(n+=864e5),a+18e5>n)this.setState({openErrTime:!0});else if(a-864e5<(new Date).valueOf())this.setState({openErrTime1:!0});else if(n-a>216e5)this.setState({openErrTime2:!0});else if(this.state.subjects.length>5)this.setState({openErrSubjects:!0});else{for(r=[],s=Math.ceil(a/18e5);s<Math.floor(n/18e5);s++)r.push(18e5*s);this.setState({tutors:[],query:{time:r,subjects:this.state.subjects}})}case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.user_data._id?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"row"},r.a.createElement("form",{className:"col s12",onSubmit:this.onSubmit,id:"Find_Tutor_Form"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(T.a,{container:!0,justify:"space-between"},r.a.createElement(I.a,{utils:D.a},r.a.createElement(Y.a,{variant:"inline",margin:"normal",id:"search_date",label:"Date",format:"M/D/YYYY",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(F.a,{variant:"inline",margin:"normal",id:"time_start",label:"Time range start",value:this.state.availableStart,onChange:this.onChangeAvailableStart,KeyboardButtonProps:{"aria-label":"change time"}}),r.a.createElement(F.a,{variant:"inline",margin:"normal",id:"time_end",label:"Time range end",value:this.state.availableEnd,onChange:this.onChangeAvailableEnd,KeyboardButtonProps:{"aria-label":"change time"}}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement(H.a,{multiple:!0,id:"subjects",size:"small",options:ue.filter((function(t){return e.props.user_data.subjects.indexOf(t)<0})),getOptionLabel:function(e){return e},filterSelectedOptions:!0,onChange:this.onChangeSubjects,renderInput:function(e){return r.a.createElement(B.a,Object.assign({},e,{label:"Subjects",helperText:"Filter tutors by subjects"}))}}))),r.a.createElement("input",{type:"submit",value:"Find tutors",className:"waves-effect waves-light btn cyan"}))),r.a.createElement(oe,{query:this.state.query,user_data:this.props.user_data,updateState:this.props.updateState,tutor_data:this.state.tutor_data,chosenDate:this.state.chosenDate,setState:this.handleSelect})),r.a.createElement(k.a,{open:this.state.openErrTime,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrTime:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your search time range must be atleast 30 minutes")),r.a.createElement(k.a,{open:this.state.openErrTime1,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrTime1:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your search time must be atleast 24 hours ahead")),r.a.createElement(k.a,{open:this.state.openErrTime2,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrTime2:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your search time range must less than 6 hours")),r.a.createElement(k.a,{open:this.state.openErrSubjects,autoHideDuration:6e3,onClose:this.handleClose,onClick:function(){e.setState({openErrSubjects:!1})}},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Your subject filter must be no larger than 5 subjects"))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),ue=["Math","Algebra","Algebra 2","Geometry","Precalculus","AP Statistics","Calculus","AP Calculus AB","AP Calculus BC","AP Economics Micro","AP Economics Macro","Biology","AP Biology","AP Enviromental Science","Chemistry","AP Chemistry","Physics","AP Physics 1","AP Physics 2","AP Physics C","English","AP English Lang","AP English Lit","AP Psychology","History","AP Human Geography","AP US History","AP European History","AP World History","Spanish","AP Spanish","Chinese","AP Chinese","French","AP French","AP Computer Science P","AP Computer Science A"],de=me,pe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return this.props.user_data._id?r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl3"},r.a.createElement("div",{className:"card-panel grey lighten-5"},r.a.createElement("div",{className:"tutorial-container"},r.a.createElement("iframe",{className:"tutorial-video",title:"tutorial video",src:"https://www.youtube.com/embed/0sXyGG8-W7A",frameborder:"0",allow:"autoplay; encrypted-media",allowfullscreen:"allowfullscreen",mozallowfullscreen:"mozallowfullscreen",msallowfullscreen:"msallowfullscreen",oallowfullscreen:"oallowfullscreen",webkitallowfullscreen:"webkitallowfullscreen"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"right"},r.a.createElement("a",{href:"/user/update",className:"waves-effect waves-light btn",style:{margin:"0.7em"}},"Continue",r.a.createElement("i",{className:"material-icons right"},"arrow_forward")))))))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),he=a(144),fe=a.n(he);var ve=function(e){return"Text"===e.type?r.a.createElement("span",null,e.message):"File"===e.type?".jpeg"===e.message.substring(e.message.length-5,e.message.length).toLowerCase()||".jpg"===e.message.substring(e.message.length-4,e.message.length).toLowerCase()||".png"===e.message.substring(e.message.length-4,e.message.length).toLowerCase()||".gif"===e.message.substring(e.message.length-4,e.message.length).toLowerCase()?r.a.createElement("img",{src:e.message,alt:e.message,width:"200vw"}):r.a.createElement("a",{href:e.message,target:"_blank",rel:"noopener noreferrer"},e.message.substring(75,e.message.length)):void 0};var Ee=function(e){return e.senderIsMe?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6 offset-xl6"},r.a.createElement("div",{className:"card-panel right"},r.a.createElement("img",{className:"circle right",src:e.image,alt:e.firstName+"'s pfp",style:{height:"2em"}}),r.a.createElement("span",{className:"right",style:{margin:"0.5em"}},r.a.createElement(ve,{type:e.type,message:e.message}))),r.a.createElement("span",{className:"right",style:{margin:"0.5em"}},j()(e.time).local().format("MMM Do h:mm A")))):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl6"},r.a.createElement("div",{className:"card-panel left"},r.a.createElement("img",{className:"circle left",src:e.image,alt:e.firstName+"'s pfp",style:{height:"2em"}}),r.a.createElement("span",{className:"left",style:{margin:"0.5em"}},r.a.createElement(ve,{type:e.type,message:e.message}))),r.a.createElement("span",{className:"left",style:{margin:"0.5em"}},j()(e.time).local().format("MMM Do h:mm A"))))},ge=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleWrite=n.handleWrite.bind(Object(v.a)(n)),n.submitChatMessage=n.submitChatMessage.bind(Object(v.a)(n)),n.handleOnDrop=n.handleOnDrop.bind(Object(v.a)(n)),n.state={roomId:null,chatMessage:"",messages:[],waiting:!1,openErrFile:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.props.match.params.roomId;case 3:return e.t1=e.sent,e.t2={roomId:e.t1},e.t0.setState.call(e.t0,e.t2),e.t3=b,e.next=9,this.props.match.params.roomId;case 9:e.t4=e.sent,e.t3.getMessages.call(e.t3,e.t4).then(function(){var e=Object(f.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({messages:[].concat(Object(se.a)(a),Object(se.a)(t.state.messages)).sort((function(e,t){return j()(e.createdAt).valueOf()-j()(t.createdAt).valueOf()}))}),setTimeout((function(){t.messagesEnd&&t.messagesEnd.scrollIntoView({behavior:"smooth"})}),500);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(!this.props.user_data.chat_passwords&&e.user_data.chat_passwords){this.socket=fe()("/"),this.socket.emit("connectToRoom",e.match.params.roomId,e.user_data.chat_passwords[e.match.params.roomId]),this.socket.on("accessDenied",(function(e){window.location.href="/"})),this.socket.on("newMessage",(function(e){t.setState({messages:[].concat(Object(se.a)(t.state.messages),[e]).sort((function(e,t){return j()(e.createdAt).valueOf()-j()(t.createdAt).valueOf()}))})}))}}},{key:"componentDidUpdate",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.messagesEnd&&this.messagesEnd.scrollIntoView({behavior:"smooth"});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleWrite",value:function(e){this.setState({chatMessage:e.target.value})}},{key:"submitChatMessage",value:function(e){if(e.preventDefault(),""!==this.state.chatMessage){var t={chatRoom:this.state.roomId,message:this.state.chatMessage,sender:this.props.user_data._id,type:"Text",createdAt:(new Date).valueOf()};this.socket.emit("newMessageFromUser",t),this.setState({chatMessage:"",messages:[].concat(Object(se.a)(this.state.messages),[t]).sort((function(e,t){return e.createdAt-t.createdAt})),openErrFile:!1})}}},{key:"handleOnDrop",value:function(e,t){var a=this;if(t&&t.length>0&&this.setState({openErrFile:!0}),e.length>0){this.setState({waiting:!0});var n=new FormData;n.append("file",e[0]);b.postNewFile(n,{header:{"content-type":"multipart/form-data"}}).then((function(e){if(e.fileLink){var t={chatRoom:a.state.roomId,message:e.fileLink,sender:a.props.user_data._id,type:"File",createdAt:(new Date).valueOf()};a.socket.emit("newMessageFromUser",t),a.setState({chatMessage:"",messages:[].concat(Object(se.a)(a.state.messages),[t]).sort((function(e,t){return e.createdAt-t.createdAt})),waiting:!1,openErrFile:!1})}}))}}},{key:"render",value:function(){var e=this;return this.props.user_data._id?r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12"},r.a.createElement("div",{className:"card-panel chat-config",style:{margin:"0.5em"}},this.state.messages.map((function(t,a,n){return a<n.length-1?r.a.createElement(Ee,{key:a,time:t.createdAt,senderIsMe:t.sender===e.props.user_data._id,type:t.type,message:t.message,image:t.sender===e.props.user_data._id?e.props.user_data.image:e.props.user_data.contacts_data[t.sender].image,firstName:t.sender===e.props.user_data._id?e.props.user_data.firstName:e.props.user_data.contacts_data[t.sender].firstName}):r.a.createElement("div",{key:a},r.a.createElement(Ee,{time:t.createdAt,senderIsMe:t.sender===e.props.user_data._id,type:t.type,message:t.message,image:t.sender===e.props.user_data._id?e.props.user_data.image:e.props.user_data.contacts_data[t.sender].image,firstName:t.sender===e.props.user_data._id?e.props.user_data.firstName:e.props.user_data.contacts_data[t.sender].firstName}),r.a.createElement("div",{ref:function(t){e.messagesEnd=t},style:{float:"left",clear:"both"}}))}))))),this.state.waiting?r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))):null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl11"},r.a.createElement("textarea",{id:"Message",className:"materialize-textarea",value:this.state.chatMessage,onChange:this.handleWrite,style:{margin:"0.5em"}})),r.a.createElement("div",{className:"col s12 xl1"},r.a.createElement("a",{href:"#Send",className:"btn waves-effect waves-light blue",onClick:this.submitChatMessage,style:{margin:"0.5em"}},r.a.createElement("i",{className:"material-icons"},"send")),r.a.createElement(W.a,{onDrop:this.handleOnDrop,multiple:!1,maxSize:1e7},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("span",t(),r.a.createElement("input",a()),r.a.createElement("button",{className:"btn-floating btn waves-effect waves-light blue",style:{margin:"0.5em"}},r.a.createElement("i",{className:"material-icons"},"attach_file")))})))),r.a.createElement(k.a,{open:this.state.openErrFile,onClick:function(){e.setState({openErrFile:!1})},autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(A.a,{elevation:6,variant:"filled",onClose:this.handleClose,severity:"error"},"Only files under 10 mb are accepted"))):r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue-only"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"})))))}}]),a}(n.Component),be=Object(d.g)(ge),Ne=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).updateState=e.updateState.bind(Object(v.a)(e)),e.state={logged_in:!0,user_data:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.getUser().then((function(e){return t.setState({user_data:e,logged_in:e.logged_in})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateState",value:function(){var e=this;b.getUser().then((function(t){return e.setState({user_data:t})}))}},{key:"render",value:function(){var e=this;return this.state.logged_in?-1===this.state.user_data.grade?r.a.createElement(d.a,{to:{pathname:"/api/logout"}}):r.a.createElement("div",null,r.a.createElement(S,{user_data:this.state.user_data}),r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(M,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/tutorial",render:function(){return r.a.createElement(pe,{user_data:e.state.user_data})}}),r.a.createElement(d.b,{path:"/user/:userId",render:function(){return r.a.createElement(ne,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/chat/:roomId",render:function(){return r.a.createElement(be,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/learn",render:function(){return r.a.createElement(de,{user_data:e.state.user_data,updateState:e.updateState})}}),r.a.createElement(d.b,{path:"/volunteer",render:function(){return r.a.createElement(R,{user_data:e.state.user_data})}}),r.a.createElement(d.b,{path:"/appointments",render:function(){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 xl8 offset-xl2"},r.a.createElement(P,{user_data:e.state.user_data,updateState:e.updateState})))}})):r.a.createElement(d.a,{to:{pathname:"/login"}})}}]),a}(n.Component),ye=(a(221),function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={logged_in:!1},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.getLoggedIn().then((function(e){return t.setState({logged_in:e})}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.logged_in?r.a.createElement(d.a,{to:{pathname:"/"}}):r.a.createElement("div",null,r.a.createElement("nav",{className:"primary-color-background"},r.a.createElement("div",{className:"nav-wrapper container"},r.a.createElement("a",{href:"/",className:"brand-logo center"},"ConnectedPeer"))),r.a.createElement("div",{class:"video-background"},r.a.createElement("div",{class:"video-foreground"},r.a.createElement("iframe",{src:"https://www.youtube.com/embed/tGTvMVjX3Eo?start=7&autoplay=1&mute=1&controls=0&rel=0&loop=1&list=PLnV3b5c0KJlq_xTir5-P7LnFAQcuSnPaV",title:"ConnectedPeer Promo",frameborder:"0"}))),r.a.createElement("div",{className:"row section"},r.a.createElement("div",{className:"col s12 m6 offset-m3 xl4 offset-xl4"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("a",{href:"https://connectedpeertutoring.org"},r.a.createElement("img",{src:"/images/Connected.svg",alt:"ConnectedPeer Logo"}))),r.a.createElement("div",{className:"card-content center-align"},r.a.createElement("a",{href:"/auth/google"},r.a.createElement("img",{src:"/images/GoogleLogin.png",onMouseOver:function(e){return e.currentTarget.src="/images/GoogleLoginHover.png"},onMouseOut:function(e){return e.currentTarget.src="/images/GoogleLogin.png"},alt:"Google Login"})))))))}}]),a}(n.Component)),Ce=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:ye}),r.a.createElement(d.b,{path:"/",component:Ne}))}}]),a}(n.Component);l.a.render(r.a.createElement(i.a,null,r.a.createElement(Ce,null)),document.getElementById("root"))}},[[159,1,2]]]);
//# sourceMappingURL=main.f02ed477.chunk.js.map